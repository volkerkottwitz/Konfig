<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <title>DUOVIEWER – EWE Preisliste (Final)</title>
  <link rel="manifest" href="manifest1.json">
  <link rel="apple-touch-icon" href="images/ewe-icon-180.png">
  <link rel="icon" href="images/ewe-icon-32.png" type="image/png">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles-final.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  
</head>
<body>

  <!-- Weißer Ladebildschirm mit pulsierendem PNG -->
<div id="loadingScreen">
  <img src="images/ewe-icon-180.png" alt="Lade..." class="loading-logo">
</div>

<div id="header">
  <div class="header-left">
<!-- Korrekte und funktionierende Struktur -->
<a href="https://www.ewe-armaturen.de" 
   target="_blank" 
   rel="noopener" 
   data-tooltip="Zur EWE-Armaturen Webseite">
      <img src="images/logo.png" alt="EWE Logo">
</a>
  </div>
  <div class="header-content">
    <h1>DuoViewer</h1>
  <!--  <div id="header-date" class="header-date"></div>-->
  </div>
  <div class="header-right">
    <!-- Diese Buttons sind nur auf dem Desktop sichtbar -->

<!-- In .header-right -->
<div class="buttons desktop-buttons">

  <!-- NEU: Der Button zum Öffnen des Dokumenten-Dialogs -->
<!-- NEU: Der Button zum Öffnen des Dokumenten-Dialogs -->
<button id="openDocDialogBtn" class="header-icon-btn" data-tooltip="Dokumentauswahl anzeigen">
  <i class="bi bi-collection"></i>
</button>

<!-- Die bereits vorhandenen Links -->
<a href="#" onclick="openMerkliste( ); return false;" class="header-icon-btn" data-tooltip="Merkliste anzeigen">
  <i class="bi bi-list-check"></i>
</a>

  <!-- ======================================================== -->
  <!--     HIER IST DER BUTTON MIT DEM KORRIGIERTEN PFAD      -->
  <!-- ======================================================== -->
  <a href="Retourenschein/berichte.html" 
     class="header-icon-btn" 
     data-tooltip="Bericht diktieren"
     target="_blank" 
     rel="noopener noreferrer">
    <i class="bi bi-mic-fill"></i>
  </a>

<a href="megaripp.html" 
   class="header-icon-btn" 
   data-tooltip="Konfigurator MEGARIPP"
   target="_blank" 
   rel="noopener">
  <i class="bi bi-gear-wide-connected"></i>
</a>
<a href="flexoripp.html"
   class="header-icon-btn" 
   data-tooltip="Konfigurator FLEXORIPP"
   target="_blank" 
   rel="noopener">
  <i class="bi bi-gear-wide-connected"></i>
</a>
<a href="https://www.youtube.com/watch?v=0_29ByAIswI" class="header-icon-btn" target="_blank" rel="noopener noreferrer" data-tooltip="EWE-Youtube Kanal">
  <i class="bi bi-film"></i>
</a>

</div>


    <!-- Hamburger-Button nur für Mobile -->
    <button id="hamburger-btn" class="icon-button">☰</button>
  </div>
</div>

<!-- Das mobile Navigationsmenü (außerhalb des Headers  ) -->
<div id="mobile-nav">
  <!-- Dokumentenauswahl für Mobile -->
  <a href="#" onclick="document.getElementById('openDocDialogBtn').click(); closeMobileNav(); return false;">
    <i class="bi bi-collection"></i> Dokumente wechseln
  </a>
  
  <!-- Merkliste -->
  <a href="#" onclick="openMerkliste(); closeMobileNav(); return false;">
    <i class="bi bi-list-check"></i> Merkliste
  </a>

  <!-- Bericht diktieren -->
  <a href="Retourenschein/berichte.html" target="_blank" rel="noopener noreferrer" onclick="closeMobileNav()">
    <i class="bi bi-mic-fill"></i> Bericht diktieren
  </a>

  <!-- Konfiguratoren -->
  <a href="megaripp.html" target="_blank" rel="noopener noreferrer" onclick="closeMobileNav()">
    <i class="bi bi-gear-wide-connected"></i> Konfigurator MEGARIPP
  </a>
  <a href="flexoripp.html" target="_blank" rel="noopener noreferrer" onclick="closeMobileNav()">
    <i class="bi bi-sliders"></i> Konfigurator FLEXORIPP
  </a>

  <!-- YouTube-Link -->
  <a href="https://www.youtube.com/watch?v=0_29ByAIswI" target="_blank" rel="noopener noreferrer" onclick="closeMobileNav( )">
    <i class="bi bi-film"></i> EWE-Youtube Kanal
  </a>
</div>



<div class="search-container">
  <input type="text" id="searchBox" placeholder="Suchbegriff 1" data-tooltip="Ersten Suchbegriff eingeben">

  <!-- NEUE SUCHOPERATOR-BUTTONS -->
  <div id="search-operator-group" class="search-operator-group">
    <button class="operator-btn active" data-op="und" data-tooltip="Zeigt nur Seiten, auf denen BEIDE Begriffe vorkommen">UND</button>
    <button class="operator-btn" data-op="oder" data-tooltip="Zeigt Seiten, auf denen MINDESTENS EINER der Begriffe vorkommt">ODER</button>
    <button class="operator-btn" data-op="ohne" data-tooltip="Zeigt Seiten, die den ersten, aber NICHT den zweiten Begriff enthalten">OHNE</button>
  </div>

  <input type="text" id="searchBox2" placeholder="Suchbegriff 2 (verknüpft)" data-tooltip="Zweiten Suchbegriff eingeben (optional)">

  <div class="button-row">
    <button onclick="searchPDF()" class="icon-button" data-tooltip="Suche starten">🔍</button>
    <button onclick="printCurrentPage()" class="icon-button" data-tooltip="Aktuelle Seite drucken">🖨️</button>
    <button onclick="printAllMatches()" class="icon-button" data-tooltip="Alle Treffer drucken">🖨️ Alle</button>
  </div>
  <div id="loadingSpinnerOverlay">
    <img src="images/ewe-icon-180.png" class="rotating-logo" alt="Lädt…">
  </div>
</div>

<div id="infoSection">
  <div id="searchStatus">
    <span id="searchInfo"></span>
    <span id="currentMatchInfo"></span>
    <span id="page-info"></span> <!-- Hier kommt die Seitenzahl rein -->
  </div>
  <div id="progressBar"><div id="progressFill"></div></div>
</div>

  <div class="navigation-buttons">
    <button id="prev-page" data-tooltip="Vorherige Seite">◀ PDF</button>
    <button onclick="prevMatch()" data-tooltip="Vorheriger Treffer" disabled>⬅ 🎯</button>
    <button onclick="nextMatch()" data-tooltip="Nächster Treffer" disabled>🎯 ➡</button>
    <button id="next-page" data-tooltip="Nächste Seite">PDF ▶</button>
  </div>

  <div class="zoom-buttons">
    <button onclick="zoomOut()" data-tooltip="Verkleinern">🔍 –</button>
    <button onclick="zoomIn()" data-tooltip="Vergrößern">🔍 +</button>
  </div>


  <div id="pdfContainer">
    <button id="removeHitBtn" style="display: none;" data-tooltip="Die aktuelle Seite wird aus Ihrer Mappe entfernt">Seite entfernen</button>
    <button id="addHitBtn" style="display: none;" data-tooltip="Die aktuelle Seite wird Ihrer Mappe hinzugefügt">Seite hinzufügen</button>
    <div id="animationWrapper"> <!-- NEUER WRAPPER -->
    <div id="pdfViewer"></div>
    </div>
  </div>

<!-- Info Modal -->
<div id="infoModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
     background-color: rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:9999;">
  <div style="background:white; padding:25px 30px; border-radius:10px; max-width:400px; text-align:center; font-family: Arial, sans-serif;">
    <h2>Information</h2>
    <p>Diese Anwendung wurde für <br><br><strong>Wilhelm Ewe Armaturen GmbH & Co.KG</strong><br></p>
    <p>entwickelt.<br><br>Es handelt sich<br>um die <strong>Beta-Version 1.212505 (Final)</strong>.</p>
    <p>Programmfehler bitte melden an: <br>
      <a href="mailto:volker.kottwitz@ewe-armaturen.de">volker.kottwitz@ewe-armaturen.de</a>
    </p>
    <button onclick="closeInfo()" style="margin-top:15px; padding:8px 16px; border:none; background-color:#00a1e1; color:white; border-radius:5px;">Schließen</button>
  </div>
</div>

<!-- Dynamische Merkliste -->
<div id="merkliste" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
     background-color: rgba(0,0,0,0.4); justify-content: center; align-items: center; z-index: 9999;">
  
  <div style="background:#fefefe; padding:25px 30px; border-radius:14px; max-width:450px; width:90%; font-family: 'Segoe UI', sans-serif; box-shadow: 0 4px 20px rgba(0,0,0,0.2);">
    
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
      <h2 style="margin: 0; font-size: 1.4rem;">📝 Ihre Merkliste</h2>
      <button onclick="schließeMerkliste()" style="background:none; border:none; font-size:22px; cursor:pointer; color:#333;">✖</button>
    </div>

    <ul id="merklisteInhalt" style="list-style:none; padding:0; margin: 20px 0; max-height: 300px; overflow-y:auto;">
      <!-- Dynamische Artikel werden hier eingefügt -->
    </ul>

    <button class="btn-kaufen" style="width:100%; padding:12px; background:#00a1e1; color:white; border:none; border-radius:8px; font-size:1rem; margin-bottom:10px; cursor:pointer;">
      Jetzt bestellen
    </button>

    <button onclick="schließeMerkliste()" style="width:100%; padding:10px; background:#e0e0e0; color:#333; border:none; border-radius:8px; font-size:0.95rem; cursor:pointer;">
      Schließen
    </button>
  </div>
</div>

  <script src="viewer-final.js"></script>
  
 <script src="retourenschein-extension.js"></script>

<!-- Dokumenten-Auswahl-Dialog -->
<div id="docDialog" style="display: none;">
  <div class="doc-dialog-header">
    <h2>Dokument auswählen</h2>
    <button id="closeDocDialogBtn" title="Schließen">✖</button>
  </div>
  <div id="docDialogList">
    <!-- Die Liste der Dokumente wird hier per JavaScript eingefügt -->
  </div>
</div>


</body>
</html>