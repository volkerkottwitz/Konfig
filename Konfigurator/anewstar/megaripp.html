<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wasserzählerschacht Konfigurator</title>
    <link rel="stylesheet" href="stylesKonfigurator.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="images/icon.png">
</head>

<body>
<div id="info-box"></div>
<div id="custom-tooltip"></div>

    <header>
<a href="https://www.ewe-armaturen.de/" target="_blank" title="EWE Armaturen Webseite besuchen">
    <img src="images/logo.png" alt="Firmenlogo" class="logo">
</a>
   <h1 onclick="resetConfig()" style="cursor: pointer;" data-tooltip="Klicken — startet Konfigurator neu">Megaripp-Konfigurator</h1>

    <!-- ======================================================= -->
    <!-- +++ NEUER BUTTON DIREKT NEBEN DEM TITEL +++ -->
    <!-- ======================================================= -->
<button id="closeToDuoViewerBtn" class="header-action-btn" title="Konfigurator schließen und zum DuoViewer zurückkehren">
   <!-- <img src="images/back-icon.png" alt="Zurück" class="btn-icon">  Icon als Bild -->
    <span>Zum DuoViewer</span>
</button>


        <!-- Fortschrittsanzeige -->
<div class="progress-container">
    <div class="progress-bar"></div>
</div>
<div class="progress-text">Schritt 1 von 8</div>
    </header>


<div id="visual-nav-container" class="visual-nav"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <main>


<!-- Die WZ-Größe -->
<section class="screen active" id="screen2">
    <h2>Wählen Sie eine Wasserzählergröße</h2>
    <div class="info-image-container">
    <img src="images/sensus.jpg" alt="Wasserzählergrößen" class="info-image fade-in pulse" onclick="showInfo('sensus' )" style="cursor: pointer;" />
    </div>
    <button onclick="saveSchacht('190mm Q3 2,5|4 1&quot;')">190mm Q3 2,5|4 1"</button>
    <button onclick="saveSchacht('260mm Q3 6,3|10 x 5/4&quot;')">260mm Q3 6,3|10 x 5/4"</button>
    <button onclick="saveSchacht('300mm Q3 16 6/4&quot;')">300mm Q3 16 6/4"</button>
    <button onclick="window.close()" class="back-btn"><i class="bi bi-arrow-left"></i> Zurück zum DuoViewer</button>
</section>


<!-- Das Eingangsventil -->
<section class="screen" id="screen3">
    <h2>Wählen Sie das Eingangsventil</h2>
    <div class="info-image-container">
    <img src="images/Kugel freistrom Eingang.jpg" alt="Eingang"
     class="info-image fade-in pulse"
     onclick="showInfo('eingang')"
     style="cursor: pointer; max-width: 280px; width: 100%;" />
    </div>
    <button onclick="saveRohrdeckung('Kugelhahn')">Kugelhahn</button>
    <button onclick="saveRohrdeckung('Schrägsitz')">Schrägsitz</button>
    <button class="back-btn" onclick="prevScreen('screen2')">Zurück</button>
</section>


<!-- Das Ausgangsventil -->
<section class="screen" id="screen4">
    <h2>Wählen Sie das Ausgangsventil</h2>
    <div class="info-image-container">
    <img src="images/ausgangksr.JPG" alt="Ausgangsventil" class="info-image fade-in pulse" onclick="showInfo('ausgang')" style="cursor: pointer;" />
    </div>
    <button onclick="saveDeckel('Kugelhahn')">Kugelhahn</button>
    <button onclick="saveDeckel('Schrägsitz')">Schrägsitz</button>
    <button onclick="saveDeckel('KMR – Kugelhahn*')">KMR – Kugelhahn*</button>
    <button onclick="saveDeckel('KMR – Schrägsitzventil*')">KMR – Schrägsitzventil*</button>
    <button onclick="saveDeckel('KSR-Ventil')">KSR-Ventil</button>
    <button class="back-btn" onclick="prevScreen('screen3')">Zurück</button>
</section>


<!-- Anzahl der WZ-Anlagen -->
<section class="screen" id="screen5">
    <h2>Wählen Sie die Anzahl der Wasserzähleranlagen</h2>
    <div class="info-image-container">
    <img src="images/wz_freistrom.jpg" alt="Anzahl der WZ-Anlagen" class="info-image fade-in pulse" onclick="showInfo('wz-anlagen')" style="cursor: pointer;" />
    </div>
    <button onclick="saveWasserzaehleranlage('1')">1</button>
    <button onclick="saveWasserzaehleranlage('2')">2</button>
    <button onclick="saveWasserzaehleranlage('3')">3</button>
    <button onclick="saveWasserzaehleranlage('4')">4</button>
    <button onclick="saveWasserzaehleranlage('5')">5</button>
    <button class="back-btn" onclick="prevScreen('screen4')">Zurück</button>
</section>


<!-- Wählen Sie die PE-Rohr Eingangsgröße -->
<section class="screen" id="screen6">
    <h2>Wählen Sie die PE-Rohr Eingangsgröße</h2>
    <div class="info-image-container">
    <img src="images/pe-rohr-eingang.jpg" alt="PE-Rohr Eingangsgröße" class="info-image fade-in pulse" onclick="showInfo('pe-rohr-eingang')" style="cursor: pointer;" />
    </div>
    <button onclick="savePEVerschraubung('PE-Größe 32')">PE-Größe 32</button>
    <button onclick="savePEVerschraubung('PE-Größe 40')">PE-Größe 40</button>
    <button onclick="savePEVerschraubung('PE-Größe 50')">PE-Größe 50</button>
    <button onclick="savePEVerschraubung('PE-Größe 63')">PE-Größe 63</button>
    <button class="back-btn" onclick="prevScreen('screen5')">Zurück</button>
</section>


<!-- Wählen Sie die PE-Rohr Ausgangsgröße -->
<section class="screen" id="screen7">
    <h2>Wählen Sie die PE-Rohr Ausgangsgröße</h2>
    <div class="info-image-container">
    <img src="images/schachtausgang.jpg" alt="PE-Rohr Ausgangsgröße" class="info-image fade-in pulse" onclick="showInfo('pe-rohr-ausgang')" style="cursor: pointer;" />
    </div>
    <button onclick="savePEGroesse('PE-Größe 32')">PE-Größe 32</button>
    <button onclick="savePEGroesse('PE-Größe 40')">PE-Größe 40</button>
    <button onclick="savePEGroesse('PE-Größe 50')">PE-Größe 50</button>
    <button onclick="savePEGroesse('PE-Größe 63')">PE-Größe 63</button>
    <button class="back-btn" onclick="prevScreen('screen6')">Zurück</button>
</section>


<!-- Schachtabdeckung für MEGARIPP -->
<section class="screen" id="screen7b">
    <h2>Wählen Sie die Schachtabdeckung für MEGARIPP</h2>
    <div class="info-image-container">
    <img src="images/SchachtabdeckungMEGA.JPG" alt="Schachtabdeckung" class="info-image fade-in pulse" onclick="showInfo('schachtabdeckung')" style="cursor: pointer;" />
    </div>
    <button onclick="saveSchachtabdeckung('Schachtabdeckung B125')">Schachtabdeckung B125</button>
    <button onclick="saveSchachtabdeckung('Betonauflagering DN625')">Betonauflagering DN625</button>
    <button onclick="saveSchachtabdeckung('Keine Auswahl')">Keine Auswahl</button>
    <button class="back-btn" onclick="prevScreen('screen7')">Zurück</button>
</section>


<!-- Wasserzählerschachtschlüssel 15mm -->
<section class="screen" id="screen8">
    <h2>Sechskant-Schlüssel für Schachtabdeckung B125</h2>
    <div class="info-image-container">
    <img src="images/schluessel6kant.jpg" alt="Wasserzählerschachtschlüssel" class="info-image fade-in pulse" onclick="showInfo('schluessel')" style="cursor: pointer;" />
    </div>
    <button onclick="saveWasserzaehlerSchluessel('Ja')">Ja</button>
    <button onclick="saveWasserzaehlerSchluessel('Nein')">Nein</button>
    <button class="back-btn" onclick="prevScreen('screen7b')">Zurück</button>
</section>

<!-- Info-Screen für Sensus -->
<section class="screen" id="infoScreen-sensus">
    <h2>Information: Wasserzählergrößen</h2>
    <div class="info-text">
        <img src="images/sensus.jpg" alt="Sensus Detailansicht" class="info-detail-img">
        <h3>Verfügbare Größen</h3>
        <ul>
            <li><strong>190 mm</strong> &ndash; Q3 2,5/4, Anschluss 1" (DN 25)</li>
            <li><strong>260 mm</strong> &ndash; Q3 6,3/10, Anschluss 5/4" (DN 32)</li>
            <li><strong>300 mm</strong> &ndash; Q3 16, Anschluss 6/4" (DN 40)</li>
        </ul>
        <h3>Technische Daten</h3>
        <ul>
            <li>Nenndruck: PN 10 / PN 16 (je nach Armatur)</li>
            <li>Trinkwasserkonform nach DIN 2000 / TrinkwV</li>
            <li>Geeignet für Kalt- und Warmwasser</li>
        </ul>
        <div class="hint-box">Die Baulänge des Wasserzählers bestimmt die Konfiguration der gesamten Anlage.</div>
    </div>
    <button class="back-btn" onclick="showScreen('screen2')">Zurück</button>
</section>

<!-- Info-Screen für Eingang -->
<section class="screen" id="infoScreen-eingang">
    <h2>Information: Eingangsventil</h2>
    <div class="info-text">
        <img src="images/Kugel freistrom Eingang.jpg" alt="Eingangsventil Detailansicht" class="info-detail-img">
        <h3>Ventiltypen am Eingang</h3>
        <ul>
            <li><strong>Kugelhahn</strong> &ndash; Freistromventil mit vollem Durchgang. Geringer Druckverlust, schnelle Absperrung (90°-Drehung).</li>
            <li><strong>Schrägsitzventil</strong> &ndash; Klassisches Absperrventil mit schrägem Ventilsitz. Feinfühlige Regelung, bewährt im Trinkwasserbereich.</li>
        </ul>
        <h3>Material</h3>
        <ul>
            <li>Armaturenkörper aus Siliziummessing (Si-Messing) &ndash; entzinkungsbeständig</li>
            <li>Trinkwasserzugelassen nach DIN 2000 / TrinkwV</li>
        </ul>
        <div class="hint-box">Das Eingangsventil sitzt vor dem Wasserzähler und dient als Hauptabsperrung der Hausanschlussleitung.</div>
    </div>
    <button class="back-btn" onclick="showScreen('screen3')">Zurück</button>
</section>

<!-- Info-Screen für Ausgang -->
<section class="screen" id="infoScreen-ausgang">
    <h2>Information: Ausgangsventil</h2>
    <div class="info-text">
        <img src="images/ausgangksr.JPG" alt="Ausgangsventil Detailansicht" class="info-detail-img">
        <h3>Ventiltypen am Ausgang</h3>
        <ul>
            <li><strong>Kugelhahn</strong> &ndash; Freistromventil mit vollem Durchgang für minimalen Druckverlust.</li>
            <li><strong>Schrägsitzventil</strong> &ndash; Bewährtes Absperrventil mit feinfühliger Regelung.</li>
            <li><strong>KMR &ndash; Kugelhahn*</strong> &ndash; Kegelmembran-Rückflussverhinderer mit Kugelhahn.</li>
            <li><strong>KMR &ndash; Schrägsitzventil*</strong> &ndash; Kegelmembran-Rückflussverhinderer mit Schrägsitzventil.</li>
            <li><strong>KSR-Ventil</strong> &ndash; Kombinierte Sicherungsarmatur mit Rückflussverhinderer. Prüfbar nach DIN EN 1717.</li>
        </ul>
        <h3>Hinweis zu KMR-Armaturen</h3>
        <ul>
            <li>Enthalten bereits einen integrierten Rückflussverhinderer</li>
            <li>Wartungsintervall: Jährliche Prüfung empfohlen</li>
        </ul>
        <div class="hint-box">Das Ausgangsventil sitzt nach dem Wasserzähler. Bei Anlagen mit Rückflussgefahr empfehlen sich KMR- oder KSR-Varianten.</div>
    </div>
    <button class="back-btn" onclick="showScreen('screen4')">Zurück</button>
</section>

<!-- Info-Screen für WZ-Anlagen -->
<section class="screen" id="infoScreen-wz-anlagen">
    <h2>Information: Anzahl der WZ-Anlagen</h2>
    <div class="info-text">
        <img src="images/wz_freistrom.jpg" alt="WZ-Anlagen Detailansicht" class="info-detail-img">
        <h3>Konfigurationsmöglichkeiten</h3>
        <ul>
            <li>Der MEGARIPP 1000 kann <strong>1 bis 5 Wasserzähleranlagen</strong> aufnehmen</li>
            <li>Über <strong>2.200 Konfigurationsvarianten</strong> möglich</li>
            <li>Schachtdurchmesser: 1.000 mm, Höhe: 1,50 m bis 6,00 m</li>
        </ul>
        <h3>Anwendungsbeispiele</h3>
        <ul>
            <li><strong>1 Anlage</strong> &ndash; Einfamilienhaus, Einzelanschluss</li>
            <li><strong>2 Anlagen</strong> &ndash; Zweifamilienhaus, Haus + Garten</li>
            <li><strong>3&ndash;5 Anlagen</strong> &ndash; Mehrfamilienhaus, Gewerbe, getrennte Versorgungsbereiche</li>
        </ul>
        <div class="hint-box">Jede Anlage besteht aus Eingangsventil, Passtück und Ausgangsventil. Alle Anlagen werden unabhängig voneinander im Schacht montiert. Der Wasserzähler wird vom Versorger gestellt.</div>
    </div>
    <button class="back-btn" onclick="showScreen('screen5')">Zurück</button>
</section>

<!-- Info-Screen für PE-Rohr Eingang -->
<section class="screen" id="infoScreen-pe-rohr-eingang">
    <h2>Information: PE-Rohr Eingangsgröße</h2>
    <div class="info-text">
        <img src="images/pe-rohr-eingang.jpg" alt="PE-Rohr Eingang Detailansicht" class="info-detail-img">
        <h3>Verfügbare PE-Rohr-Größen</h3>
        <ul>
            <li><strong>PE d32</strong> &ndash; Standard für Einzelanschlüsse (1")</li>
            <li><strong>PE d40</strong> &ndash; Für größere Durchflussmengen (5/4")</li>
            <li><strong>PE d50</strong> &ndash; Mehrfamilienhäuser, Gewerbe (6/4")</li>
            <li><strong>PE d63</strong> &ndash; Großanschlüsse (2")</li>
        </ul>
        <h3>Technische Details</h3>
        <ul>
            <li>Material: PE-HD (Hochdruck-Polyethylen) nach DIN 8074/8075</li>
            <li>Für Trinkwasser zugelassen</li>
        </ul>
        <div class="hint-box">Die Eingangsgröße richtet sich nach dem verlegten Hausanschlussrohr. Prüfen Sie den Durchmesser Ihrer vorhandenen PE-Leitung.</div>
    </div>
    <button class="back-btn" onclick="showScreen('screen6')">Zurück</button>
</section>

<!-- Info-Screen für PE-Rohr Ausgang -->
<section class="screen" id="infoScreen-pe-rohr-ausgang">
    <h2>Information: PE-Rohr Ausgangsgröße</h2>
    <div class="info-text">
        <img src="images/schachtausgang.jpg" alt="PE-Rohr Ausgang Detailansicht" class="info-detail-img">
        <h3>Verfügbare PE-Rohr-Größen</h3>
        <ul>
            <li><strong>PE d32</strong> &ndash; Standard für Hausinstallation (1")</li>
            <li><strong>PE d40</strong> &ndash; Für größere Durchflussmengen (5/4")</li>
            <li><strong>PE d50</strong> &ndash; Mehrfamilienhäuser, Gewerbe (6/4")</li>
            <li><strong>PE d63</strong> &ndash; Großanschlüsse (2")</li>
        </ul>
        <h3>Technische Details</h3>
        <ul>
            <li>Material: PE-HD (Hochdruck-Polyethylen) nach DIN 8074/8075</li>
            <li>Eingangs- und Ausgangsgröße können unterschiedlich gewählt werden</li>
        </ul>
        <div class="hint-box">Die Ausgangsgröße richtet sich nach der weiterführenden Hausinstallation. Eingangs- und Ausgangsrohr müssen nicht identisch sein.</div>
    </div>
    <button class="back-btn" onclick="showScreen('screen7')">Zurück</button>
</section>

<!-- Info-Screen für Schachtabdeckung -->
<section class="screen" id="infoScreen-schachtabdeckung">
    <h2>Information: Schachtabdeckung</h2>
    <div class="info-text">
        <img src="images/SchachtabdeckungMEGA.JPG" alt="Schachtabdeckung Detailansicht" class="info-detail-img">
        <h3>Optionen</h3>
        <ul>
            <li><strong>Schachtabdeckung B125</strong> &ndash; Belastungsklasse B125 (12,5 Tonnen). Geeignet für Gehwege, Einfahrten und Grünflächen. Verschluss mit Sechskantschlüssel SW24.</li>
            <li><strong>Betonauflagering DN625</strong> &ndash; Aufsatzring für den Einbau in bestehende Betonschächte oder bei erdverlegten Installationen mit separatem Deckel.</li>
            <li><strong>Keine Auswahl</strong> &ndash; Wenn bereits eine vorhandene Abdeckung genutzt wird.</li>
        </ul>
        <h3>Einbauhinweis</h3>
        <ul>
            <li>Schachtdurchmesser MEGARIPP: DN 1000 (1.000 mm)</li>
            <li>B125-Abdeckung: Verschluss gegen unbefugten Zugriff</li>
        </ul>
        <div class="hint-box">Die B125-Abdeckung wird mit einem Sechskantschlüssel SW24 geöffnet (separat im nächsten Schritt wählbar).</div>
    </div>
    <button class="back-btn" onclick="showScreen('screen7b')">Zurück</button>
</section>

<!-- Info-Screen für Schlüssel -->
<section class="screen" id="infoScreen-schluessel">
    <h2>Information: Sechskantschlüssel</h2>
    <div class="info-text">
        <img src="images/schluessel6kant.jpg" alt="Schlüssel Detailansicht" class="info-detail-img">
        <h3>Sechskantschlüssel SW24</h3>
        <ul>
            <li>Artikelnummer: <strong>0398001</strong></li>
            <li>Passend für Schachtabdeckung B125 des MEGARIPP</li>
            <li>Schlüsselweite: SW24</li>
        </ul>
        <h3>Bedienung</h3>
        <ul>
            <li><strong>Öffnen:</strong> Schlüssel einsetzen, gegen den Uhrzeigersinn drehen</li>
            <li><strong>Schließen:</strong> Deckel auflegen, im Uhrzeigersinn verriegeln</li>
        </ul>
        <div class="hint-box">Der Schlüssel wird nur benötigt, wenn Sie im vorherigen Schritt die Schachtabdeckung B125 gewählt haben.</div>
    </div>
    <button class="back-btn" onclick="showScreen('screen8')">Zurück</button>
</section>

<!-- Zusammenfassung -->
<section class="screen" id="summaryScreen">
    <h2>Ihre Auswahl: <span id="summaryArticleNumber"></span></h2>
    <p id="summary"></p>
    <button onclick="showUserDataScreen()">Generiere Anfrage</button>
    <button onclick="window.location.href='index-final.html'">Neu starten</button>
    <button class="back-btn" onclick="prevScreen('screen8')">Zurück</button>
</section>

<!-- Benutzer-Daten Bildschirm (wird anfangs versteckt) -->
<section class="screen" id="userDataScreen">
    <h2>Ihre Daten</h2>
    <div class="form-container">
        <div class="input-container">
            <input type="text" id="addressSearch" placeholder="Adresse suchen..." autocomplete="off">
        </div>
        <form id="userDataForm">
            <div class="input-container">
                <label for="fullName">Name*</label>
                <input type="text" id="fullName" name="fullName" required placeholder="Ihr Name">
            </div>

            <div class="input-container">
                <label for="company">Firma</label>
                <input type="text" id="company" name="company" placeholder="Ihre Firma (optional)">
            </div>

            <div class="input-container">
                <label for="street">Straße*</label>
                <input type="text" id="street" name="street" required placeholder="Ihre Straße">
            </div>

            <div class="input-container">
                <label for="postalCode">PLZ*</label>
                <input type="text" id="postalCode" name="postalCode" required placeholder="Ihre PLZ">
            </div>

            <div class="input-container">
                <label for="city">Ort*</label>
                <input type="text" id="city" name="city" required placeholder="Ihr Ort">
            </div>

            <div class="input-container">
                <label for="email">E-Mail*</label>
                <input type="email" id="email" name="email" required placeholder="Ihre E-Mail-Adresse">
            </div>

            <div class="input-container">
                <label for="phone">Telefon</label>
                <input type="tel" id="phone" name="phone" placeholder="Ihre Telefonnummer (optional)">
            </div>

            <div class="input-container">
                <label for="comments">Bemerkungen</label>
                <textarea id="comments" name="comments" placeholder="Ihre Bemerkungen (optional)"></textarea>
            </div>

            <div class="form-buttons">
                <button type="submit" class="submit-btn">Daten absenden</button>
            </div>
        </form>
        <button class="back-btn" onclick="hideUserDataScreen()" style="margin-top: 10px;">Zurück</button>
    </div>
</section>

    </main>

    <a href="#" onclick="window.open('Eween/index.html', 'eween', 'width=420,height=650,resizable=yes,scrollbars=yes'); return false;" class="floating-eween-btn" title="Fragen? EWEEN hilft!">
        <i class="bi bi-chat-dots-fill"></i>
        <span>EWEEN</span>
    </a>

    <script src="scriptmegaripp.js"></script>
    <script>
    window.initGooglePlaces = function() {
        const input = document.getElementById('addressSearch');
        if (!input) return;
        const autocomplete = new google.maps.places.Autocomplete(input, {
            componentRestrictions: { country: ['de', 'at', 'ch'] },
            fields: ['address_components', 'name']
        });
        autocomplete.addListener('place_changed', () => {
            const place = autocomplete.getPlace();
            if (!place.address_components) return;
            let strasse = '', hausnummer = '', plz = '', ort = '', firma = '';
            place.address_components.forEach(c => {
                if (c.types.includes('route')) strasse = c.long_name;
                if (c.types.includes('street_number')) hausnummer = c.long_name;
                if (c.types.includes('postal_code')) plz = c.long_name;
                if (c.types.includes('locality')) ort = c.long_name;
            });
            document.getElementById('street').value = hausnummer ? strasse + ' ' + hausnummer : strasse;
            document.getElementById('postalCode').value = plz;
            document.getElementById('city').value = ort;
            // Firmenname aus Place-Name uebernehmen (falls vorhanden und nicht gleich Adresse)
            if (place.name && place.name !== strasse && place.name !== (strasse + ' ' + hausnummer)) {
                const companyField = document.getElementById('company');
                if (companyField && !companyField.value) companyField.value = place.name;
            }
            input.value = '';
        });
    };
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBN4cAc4nq9je0of0cb_0wEUb1yCz54r7k&libraries=places&callback=initGooglePlaces" async defer></script>
</body>
</html>